<script type='text/javascript'>
    function loadRow_client(data){
        var $cn_fb = 0;
        $('#bcl-tClient > tbody').empty();
        $.each(data, function(index, value){
            $ci = value['CI'].split('-');
            if($ci[0].toLowerCase() == 'pa'){
                $ci[0] = 'Pando';
            }else if($ci[0] == 'be'){
                $ci[0] = 'Beni';
            }else if($ci[0].toLowerCase() == 'lp'){
                $ci[0] = 'La Paz';
            }else if($ci[0].toLowerCase() == 'or'){
                $ci[0] = 'Oruro';
            }else if($ci[0].toLowerCase() == 'po'){
                $ci[0] = 'PotosÃ­';
            }else if($ci[0].toLowerCase() == 'ta'){
                $ci[0] = 'Tarija';
            }else if($ci[0].toLowerCase() == 'ch'){
                $ci[0] = 'Chuquisaca';
            }else if($ci[0].toLowerCase() == 'co'){
                $ci[0] = 'Cochabamba';
            }else if($ci[0].toLowerCase() == 'sa'){
                $ci[0] = 'Santa Cruz';
            }else if($ci[0].toLowerCase() == 'ex'){
                $ci[0] = 'Extranjero';
            }else if($ci[0].toLowerCase() == 'nu'){
                $ci[0] = 'Ninguno'
            }
            $('#bcl-tClient > tbody').append(
                $('<tr>').append(
                    $('<td>').attr('class', 'col s2 center-align').append(
                        $('<span>').attr('id', 'client-ci_' + value['ID']).attr('class', 'col s12').text($.trim($ci[1]))
                    )
                ).append(
                    $('<td>').attr('class', 'col s4 center-align').append(
                        $('<span>').attr('id', 'client_' + value['ID']).attr('class', 'col s12').text(value['nombre'] + ' ' + value['apellido_Paterno'] + ' ' + value['apellido_Materno']))
                ).append(
                    $('<td>').attr('class', 'col s2 center-align').append(
                        $('<span>').attr('id', 'client-dp_' + value['ID']).attr('class', 'col s12').text($.trim($ci[0]))
                    )
                ).append(
                    $('<td>').attr('class', 'col s2  center-align').append(
                        $('<span>').attr('id', 'btnClient-nit_' + value['ID']).attr('class', 'col s12').text(value['NIT'])
                    )
                ).append(
                    $('<td>').attr('class', 'col s2 center-align').append(
                        $('<span>').attr('id', 'btnClient-rS_' + value['ID']).attr('class', 'col s12').text(value['razon_Social'])
                    )
                )
            );
            $cn_fb = (index + 1);
        });
        if($cn_fb < 3){
            var $cn_for = 3 - $cn_fb;
            for(var i = 0; i < $cn_for; i++){
            $('#bcl-tClient > tbody').append(
                $('<tr>').attr('class', 'col s12').append(
                    $('<td>')
                ).append(
                    $('<td>')
                ).append(
                    $('<td>')
                ).append(
                    $('<td>')
                ).append(
                    $('<td>')
                )
            );
        }
        }
    }
    $(document).ready(function() {
        var dat = new Date();
        
        $('select').material_select();
        $('.datepicker').pickadate({
            selectMonths: true, // Creates a dropdown to control month
            selectYears: 100,
            min: new Date(dat.getFullYear() - 100, 0, 1),
            max: new Date(dat.getFullYear(), dat.getMonth(), dat.getDate()),
            //selectYears: 15, // Creates a dropdown of 15 years to control year,
            today: 'Today',
            clear: 'Clear',
            close: 'Ok',
            format: 'yyyy-mm-dd',
            closeOnSelect: false, // Close upon selecting a date,
            container: undefined, // ex. 'body' will append picker to body
        });

        $('#ci_field, #pNumber_field, #nit_field, #bcl-pCI_field').keydown(function (e) {
            if (e.keyCode == 109 || e.keyCode == 107) {
                e.preventDefault();
                return false;
            }
        });

        $('#ci_field, #pNumber_field, #nit_field, #bcl-pCI_field').keypress(function (e) {
            var key = e.keyCode;
            if (key == 101 || key == 46 || key == 43 || key == 45){
                e.preventDefault();
                return false;
            }
        });
        
        $('#name_field, #fLast_field, #mLast_field').keydown(function (e) {
            var key = e.keyCode;
            if (e.ctrlKey || e.altKey) {
                e.preventDefault();
            } else {
                if (!((key == 8) || (key == 32) || (key == 46) || (key >= 35 && key <= 40) || (key >= 65 && key <= 90))) {
                    e.preventDefault();
                }
            }
        });

        $("#name_field, #fLast_field, #mLast_field").keypress(function(e) {
            var key = e.keyCode;
            if (e.shiftKey){
                if (!((key >= 65 && key <= 90)))  {   
                    e.preventDefault();
                    return;
                }
            }else{
                if (!((key >= 97 && key <= 122)))  { 
                    e.preventDefault();
                return;
                }
            }
        });

        $('#email_field').keydown(function (e) {
            var key = e.keyCode;
            if (e.ctrlKey || e.altKey) {
                e.preventDefault();
            } else {
                if (!((key == 8) || (key == 32) || (key == 46) || (key >= 35 && key <= 40) || (key >= 65 && key <= 90) || key == 190 || key == 189 || (key >= 48 && key <= 57))) {
                    e.preventDefault();
                }
            }
        });

        $("#email_field").keypress(function(e) {
            var key = e.keyCode;
            if (e.shiftKey){
                if (!((key >= 65 && key <= 90) || key == 64 || key == 95))  {   
                    e.preventDefault();
                    return;
                }
            }else{
                if (!((key >= 97 && key <= 122) || (key >= 48 && key <= 57) || key == 46))  {
                    e.preventDefault();
                return;
                }
            }
        });

        $("#bcl-cl-btn").click(function(){
            $.ajax({
                url: '/request/cliente_var?fName=' + $('#bcl-pNameC_field').val() + '&CI=' + $('#bcl-pCI_field').val() + "&dep=" + $('#bcl-dd-dt').val(),
                data: '',
                type: 'GET',
                success: function(data){
                    loadRow_client(data)
                },
                error: function (error){
                    $('#sl-cl-errMessage').text('Error 500.1');
                }
            });
            
        });

    });
</script>